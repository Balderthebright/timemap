#summary Basic usage for the TimeMap library.
#labels Featured

This page outlines the basic usage of the TimeMap library. I've tried to make it as both as simple and as flexible as possible, though it's stilled geared towards developers who know Javascript fairly well. Make sure to check out the [http://code.google.com/p/timemap/source/browse/#svn/trunk/examples examples] - you may well get further faster by starting with the example code than by starting from scratch.

*How to make a TimeMap*

  * [http://code.google.com/p/timemap/downloads/list Download the TimeMap library] and unzip it somewhere on your server or local machine.

  * Make an HTML page with a `<div>` tag to hold the map and another to hold the timeline. Give them unique ids (e.g. "map" and "timeline") and size them with CSS. I've found that the CSS can be a little easier if you put the map and timeline `<div>` tags inside container `<div>` tags that can be sized separately.

  * In the `<head>` of your HTML page, include the Google maps script (you'll need to get an [http://code.google.com/apis/maps/signup.html API key] from Google, of course), the SIMILE Timeline script, and the TimeMap script. In most cases, you'll probably want to use the file `timemap_full.pack.js` - this includes all the other scripts in the library, packed with the YUI compressor. If you're concerned about download size, you could use the `timemap.pack.js` file and include other scripts as necessary.

  The page should look something like this (though of course you can put other things in here besides just the map and timeline if you want):

  {{{
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Map Timeline Mashup</title>
    <script src="http://maps.google.com/maps?file=api&v=2&key=[API-KEY]" type="text/javascript"></script>
    <script src="http://simile.mit.edu/timeline/api/timeline-api.js" type="text/javascript"></script>
    <script src="timemap_full.pack.js" type="text/javascript"></script>
    <link href="your-css-file.css" type="text/css" rel="stylesheet"/>
  </head>
  <body onLoad="onLoad()" onunload="GUnload();">
    <div id="timelinecontainer">
      <div id="timeline"></div>
    </div>
    <div id="mapcontainer">
      <div id="map"></div>
    </div>
  </body>
</html>
}}}

  * You may have noticed the `onLoad()` function called in the page as shown above. You'll need to write that function, either in the `<head>` of your HTML page or in a separate Javascript file. Fortunately, the only thing that function needs to do is call `timemapInit()` with the settings and data for your TimeMap. At bare minimum, you need to pass the ids of the map and timeline `<div>`s, and whatever data you'd like to load. A very simple `onLoad()` function, with one dataset containing one item, might look like this:

{{{
function onLoad() {
  tm = timemapInit({
    mapId: "map",               // Id of map div element (required)
    timelineId: "timeline",     // Id of timeline div element (required) 
    datasets: [
      {
        data: {
          type: "basic",  // Other options include "json" and "kml"
          value: [        // Put in an array of objects
            {
              // The start date for the event
              "start" : "2008-09-02",
              // The end date for the event - omit for instant events    
              "end" : "2008-09-30",
              // The placemark could be a point, polyline, polygon, or overlay
              "point" : {                   
                "lat" : 37.872312,
                "lon" : -122.258863
              },
              // by default, the title and description are shown in the info window
              "title" : "An event at South Hall",
              "options" : {
                "description" : "UC Berkeley School of Information"
              }
            }
          ]
        }
      }
    ]
  });
}
}}}

And that's it! There are a ton of different possible options for the `timemapInit()` function - you can find a reference in the [http://code.google.com/p/timemap/source/browse/trunk/examples/timemapinit_usage.js examples/timemapinit_usage.js file] and the various example files. If you find you can't do what you want with `timemapInit()`, you can [CustomInitScript write your own initialization script] - but you can probably do a lot of what you want without going that far.

==Troubleshooting==

  * One problem I've found that can be hard to diagnose is actually the size of the divs, as set by CSS - if they are sized so that they have 0 height, for example, the javascript may throw an error. Try giving them absolute pixel sizes and a visible background first, and see if you can get that working.

  * Loading remote JSON or KML files should be pretty simple, but if you can't get it to work, try loading static inline data first, as shown above - this will ensure that it's the remote data that's causing problems, not the rest of the code. Also note that KML must live on the same site as the page with your TimeMap in order to load - if you want to load external KML, you may need to set up some kind of proxy on your server.